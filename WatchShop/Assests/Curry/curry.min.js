/*!
 * Curry currency conversion jQuery Plugin v0.8.1
 * http://curry.netyou.co.il
 * https://bitbucket.org/netyou/curry-currency-ddm
 *
 * Copyright 2015, NetYou
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(d){d.fn.curry=function(n){window.jQCurryPluginCache||(window.jQCurryPluginCache=[{},!1]);var e="",g={},v=window.jQCurryPluginCache[1],p=d(document),h,l,r,m,t,k=d.extend({target:".price",change:!0,base:"USD",symbols:{}},n);this.each(function(){var b=d(this),a=b.attr("id"),f=b.attr("class"),a=""+(a?' id="'+a+'"':"");f?(a+=' class="curry-ddm',a=f?a+(" "+f+'"'):a+'"'):a+="";e="<select"+a+"></select>";f=d(e).insertAfter(b);b.detach();h=h?h.add(f):f});var q=function(b){e="";h.each(function(){for(m in b)t=
b[m],e+='<option value="'+m+'" data-rate="'+t+'">'+m+"</option>";d(e).appendTo(this)})};if(k.customCurrency)q(k.customCurrency);else if(v)p.on("jQCurryPlugin.gotRates",function(){q(window.jQCurryPluginCache[0])});else n=d.ajax({url:"https://query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{q:'select * from yahoo.finance.xchange where pair="USDINR,USDEUR,USDCAD,USDGBP,USDILS"',format:"json",env:"store://datatables.org/alltableswithkeys"}}),window.jQCurryPluginCache[1]=!0,n.done(function(b){b=
b.query.results.rate;g[k.base]=1;for(var a=0,d=b.length;a<d;a++)l=b[a],r=l.Name.substr(l.Name.length-3),g[r]=+l.Rate;q(g);window.jQCurryPluginCache[0]=g;p.trigger("jQCurryPlugin.gotRates")}).fail(function(b){console.log(b)});if(k.change){var w=d.extend({USD:"&#36;",GBP:"&pound;",EUR:"&euro;",JPY:"&yen;"},k.symbols),u;p.on("change",this.selector,function(){for(var b=d(k.target),a=d(this).find(":selected"),f=a.data("rate"),e=!1,c,h=b.length,g=0;g<h;g++)$price=d(b[g]),c=$price.text(),-1!==c.indexOf(",")&&
(e=!0,c=c.replace(",",".")),c=Number(c.replace(/[^0-9\.]+/g,"")),$price.data("base-figure")?c=f*$price.data("base-figure"):($price.data("base-figure",c),c*=f),c=Number(c.toString().match(/^\d+(?:\.\d{0,2})?/)),e&&(c=c.toString().replace(".",","),e=!1),u=w[a.val()]||a.val(),$price.html('<span class="symbol">'+u+"</span>"+c)})}return h}})(jQuery);